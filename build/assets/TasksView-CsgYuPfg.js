import{c as N,j as t,r as m,f as c,s as u,b as h,i as w}from"./index-Ba2nAqIV.js";import{E as f}from"./empty-state-lsoaZSXA.js";import{t as k}from"./i18n-DFBAP00p.js";import{P as C}from"./plus-DPR9NF9E.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]],P=N("flag",S),D=({options:n,value:l,onChange:d})=>t.jsx("div",{className:"inline-flex p-1 rounded-xl border border-[var(--app-light-gray)] bg-[var(--app-card)]",children:n.map(o=>{const p=o.id===l;return t.jsx("button",{onClick:()=>d(o.id),className:`px-3 py-1.5 rounded-lg text-sm transition ${p?"text-white":"text-[var(--app-text)]"}`,style:{backgroundColor:p?"var(--app-blue)":"transparent"},children:o.label},o.id)})}),T=({children:n,color:l})=>t.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-lg text-xs",style:{backgroundColor:l?`${l}20`:"var(--app-light-gray)",color:l||"var(--app-text)"},children:n}),B=()=>{const[n,l]=m.useState("kanban"),[d,o]=m.useState({todo:[{id:1,title:"Revisar código do projeto",description:"Fazer code review das últimas mudanças",priority:"high",dueDate:"2025-08-27",tags:["desenvolvimento","urgente"]},{id:2,title:"Planejar reunião semanal",description:"Preparar agenda e pontos importantes",priority:"medium",dueDate:"2025-08-28",tags:["reunião"]}],inProgress:[{id:3,title:"Criar apresentação Q3",description:"Slides para apresentação de resultados",priority:"high",dueDate:"2025-08-29",tags:["apresentação","importante"]}],done:[{id:4,title:"Responder emails",description:"Verificar e responder emails pendentes",priority:"low",dueDate:"2025-08-26",tags:["email"]}]});m.useEffect(()=>{(async()=>{try{const e=await c.listTasks(),a={todo:e.filter(s=>!s.completed).map(s=>({id:s._id,title:s.title,description:"",priority:"medium",dueDate:"",tags:[]})),inProgress:[],done:e.filter(s=>s.completed).map(s=>({id:s._id,title:s.title,description:"",priority:"low",dueDate:"",tags:[]}))};o(a)}catch{const e=u.get("tasks");e&&o(e)}})()},[]),m.useEffect(()=>{u.set("tasks",d)},[d]);const p=e=>{switch(e){case"high":return"var(--app-yellow)";case"medium":return"var(--app-blue)";case"low":return"var(--app-green)";default:return"var(--app-gray)"}},x=[{id:"todo",title:"A Fazer",color:"var(--app-gray)",tasks:d.todo},{id:"inProgress",title:"Em Progresso",color:"var(--app-blue)",tasks:d.inProgress},{id:"done",title:"Concluído",color:"var(--app-green)",tasks:d.done}],y=async()=>{const e=prompt("Nova tarefa");if(e)try{const a=await c.createTask({title:e,completed:!1});o(s=>({...s,todo:[{id:a._id,title:a.title,description:"",priority:"medium",dueDate:"",tags:[]},...s.todo]}))}catch{o(a=>({...a,todo:[{id:Date.now(),title:e,description:"",priority:"medium",dueDate:"",tags:[]},...a.todo]}))}},j=async e=>{try{const a=String(e.id),s=await c.updateTask(a,{completed:!e.completed});if(o(r=>({...r,todo:r.todo.filter(i=>String(i.id)!==a),inProgress:r.inProgress.filter(i=>String(i.id)!==a),done:r.done.filter(i=>String(i.id)!==a)})),s&&s._id){const r={id:s._id,title:s.title,description:"",priority:"medium",dueDate:"",tags:[],completed:s.completed};o(i=>({...i,...s.completed?{done:[r,...i.done]}:{todo:[r,...i.todo]}}))}}catch{}},b=async e=>{const a=String(e.id);try{await c.deleteTask(a)}catch{}o(s=>({...s,todo:s.todo.filter(r=>String(r.id)!==a),inProgress:s.inProgress.filter(r=>String(r.id)!==a),done:s.done.filter(r=>String(r.id)!==a)}))},v=async e=>{const a=prompt("Editar título",e.title);if(!a)return;const s=String(e.id);try{await c.updateTask(s,{title:a})}catch{}o(r=>({...r,todo:r.todo.map(i=>String(i.id)===s?{...i,title:a}:i),inProgress:r.inProgress.map(i=>String(i.id)===s?{...i,title:a}:i),done:r.done.map(i=>String(i.id)===s?{...i,title:a}:i)}))},g=({task:e})=>t.jsxs(h,{className:"p-4 bg-white rounded-xl border-0 shadow-sm mb-3",children:[t.jsxs("div",{className:"flex items-start justify-between mb-2",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900 line-clamp-2",children:e.title}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{className:"text-xs px-2 py-1 rounded-lg bg-[var(--app-light-gray)]",onClick:()=>j(e),children:e.completed?"Reabrir":"Concluir"}),t.jsx("button",{className:"text-xs px-2 py-1 rounded-lg bg-[var(--app-light-gray)]",onClick:()=>v(e),children:"Editar"}),t.jsx("button",{className:"text-xs px-2 py-1 rounded-lg bg-[var(--app-red)] text-white",onClick:()=>b(e),children:"Excluir"})]})]}),e.description&&t.jsx("p",{className:"text-xs text-[var(--app-gray)] mb-3 line-clamp-2",children:e.description}),t.jsxs("div",{className:"flex items-center justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(P,{size:12,style:{color:p(e.priority)}}),t.jsx("span",{className:"text-xs text-[var(--app-gray)] capitalize",children:e.priority})]}),t.jsxs("div",{className:"flex items-center space-x-1 text-xs text-[var(--app-gray)]",children:[t.jsx(w,{size:12}),t.jsx("span",{children:new Date(e.dueDate).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"})})]})]}),t.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map((a,s)=>t.jsx(T,{children:a},s))})]});return t.jsxs("div",{className:"flex flex-col h-full",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:k("tasks")}),t.jsx(D,{options:[{label:"Lista",value:"list"},{label:"Kanban",value:"kanban"}],value:n,onChange:l})]}),t.jsx("div",{className:"grid grid-cols-3 gap-4 mb-6",children:x.map(e=>t.jsxs(h,{className:"p-4 bg-white rounded-xl border-0 shadow-sm text-center",children:[t.jsx("div",{className:"w-8 h-8 rounded-full mx-auto mb-2 flex items-center justify-center",style:{backgroundColor:`${e.color}15`},children:t.jsx("span",{className:"text-sm font-semibold",style:{color:e.color},children:e.tasks.length})}),t.jsx("p",{className:"text-xs text-[var(--app-gray)]",children:e.title})]},e.id))}),n==="kanban"&&t.jsx("div",{className:"flex-1 overflow-hidden",children:t.jsx("div",{className:"flex space-x-4 overflow-x-auto pb-4",style:{minHeight:"400px"},children:x.map(e=>t.jsxs("div",{className:"flex-shrink-0 w-72",children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:e.color}}),t.jsx("h3",{className:"font-medium text-gray-900",children:e.title}),t.jsxs("span",{className:"text-sm text-[var(--app-gray)]",children:["(",e.tasks.length,")"]})]}),t.jsx("button",{className:"text-[var(--app-gray)]",onClick:y,children:t.jsx(C,{size:16})})]}),e.tasks.length===0?t.jsx(f,{title:"Sem itens",description:"Adicione uma tarefa para começar"}):t.jsx("div",{className:"space-y-3",children:e.tasks.map(a=>t.jsx(g,{task:a},a.id))})]},e.id))})}),n==="list"&&t.jsx("div",{className:"flex-1 space-y-3",children:[...d.todo,...d.inProgress,...d.done].length===0?t.jsx(f,{title:"Nenhuma tarefa",description:"Crie sua primeira tarefa"}):[...d.todo,...d.inProgress,...d.done].map(e=>t.jsx(g,{task:e},e.id))})]})};export{B as default};
