import{c as u,r as o,s as x,K as g,j as t,f as y,b as M,i as $}from"./index-Ba2nAqIV.js";import{C as E}from"./chevron-right-C18Cax6F.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],_=u("chevron-left",R);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],A=u("map-pin",T);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],z=u("users",L),Y=()=>{const[r,m]=o.useState(new Date),[i,p]=o.useState("week"),[d,v]=o.useState(()=>x.get(g.calendarEvents)||[]),[b,D]=o.useState(()=>!!x.get(g.googleConnected));o.useEffect(()=>{x.set(g.calendarEvents,d)},[d]);const w=["Dom","Seg","Ter","Qua","Qui","Sex","Sáb"],f=new Date,N=o.useMemo(()=>{const e=new Date(r.getFullYear(),r.getMonth(),1),s=new Date(e);return s.setDate(e.getDate()-e.getDay()),Array.from({length:42},(a,n)=>{const c=new Date(s);return c.setDate(s.getDate()+n),c})},[r]),h=e=>{const s=e.getFullYear(),a=e.getMonth(),n=e.getDate();return d.filter(c=>{const l=new Date(c.start);return l.getFullYear()===s&&l.getMonth()===a&&l.getDate()===n})},j=(e,s)=>{const a=new Date(e).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"}),n=new Date(s).toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"});return`${a} - ${n}`},k=async()=>{try{const{url:e}=await y.googleAuthUrl(),s=window.open(e,"_blank","width=500,height=700");alert("Conclua o OAuth na janela aberta e clique OK para continuar.");try{const a=await y.googleEvents();a?.events&&(v(n=>[...n,...a.events]),x.set(g.googleConnected,!0),D(!0))}catch{}}catch{}};o.useEffect(()=>{const e=setInterval(()=>{const s=Date.now(),a=d.find(n=>new Date(n.start).getTime()-s<=1200*1e3&&new Date(n.start).getTime()-s>0);a&&Notification&&Notification.permission==="granted"&&new Notification("Lembrete",{body:`Saia em 20min para: ${a.title}`})},6e4);return()=>clearInterval(e)},[d]);const C=e=>e.toLocaleDateString("pt-BR",{day:"2-digit",month:"long",year:"numeric"}),S=(()=>{const e=new Date(r),s=e.getDay();return e.setDate(e.getDate()-s),Array.from({length:7},(a,n)=>{const c=new Date(e);return c.setDate(e.getDate()+n),c})})();return t.jsxs("div",{className:"flex flex-col h-full",children:[t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("h1",{className:"text-2xl font-semibold text-gray-900",children:"Agenda"}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx("button",{onClick:()=>p("day"),className:`px-3 py-1 rounded-lg text-sm ${i==="day"?"bg-[var(--app-blue)] text-white":"bg-gray-100 text-[var(--app-gray)]"}`,children:"Dia"}),t.jsx("button",{onClick:()=>p("week"),className:`px-3 py-1 rounded-lg text-sm ${i==="week"?"bg-[var(--app-blue)] text-white":"bg-gray-100 text-[var(--app-gray)]"}`,children:"Semana"}),t.jsx("button",{onClick:()=>p("month"),className:`px-3 py-1 rounded-lg text-sm ${i==="month"?"bg-[var(--app-blue)] text-white":"bg-gray-100 text-[var(--app-gray)]"}`,children:"Mês"}),t.jsx("button",{onClick:k,className:`px-3 py-1 rounded-lg text-sm ${b?"bg-green-100 text-green-700":"bg-gray-100 text-[var(--app-gray)]"}`,children:b?"Google conectado":"Conectar Google"}),t.jsx("button",{onClick:async()=>{try{const e=await y.estimateRoute({from:"Casa",to:"Próximo evento",mode:"transit"});alert(`Rota: ${e.mode}, ETA ${e.etaMin}min`)}catch{}},className:"px-3 py-1 rounded-lg text-sm bg-gray-100 text-[var(--app-gray)]",children:"Rotas"})]})]}),t.jsxs("div",{className:"flex items-center justify-between mb-6",children:[t.jsx("button",{onClick:()=>{const e=new Date(r);e.setDate(e.getDate()-7),m(e)},className:"p-2 text-[var(--app-gray)] hover:text-gray-900",children:t.jsx(_,{size:20})}),t.jsx("h2",{className:"text-lg font-medium text-gray-900",children:C(r)}),t.jsx("button",{onClick:()=>{const e=new Date(r);e.setDate(e.getDate()+7),m(e)},className:"p-2 text-[var(--app-gray)] hover:text-gray-900",children:t.jsx(E,{size:20})})]}),i==="month"&&t.jsx("div",{className:"grid grid-cols-7 gap-2",children:N.map((e,s)=>{const a=e.getMonth()===r.getMonth(),n=e.toDateString()===f.toDateString(),c=h(e);return t.jsxs("div",{className:`p-2 rounded-xl border ${a?"bg-white":"bg-gray-50"} ${n?"border-[var(--app-blue)]":"border-gray-100"}`,children:[t.jsx("div",{className:"flex items-center justify-between mb-1",children:t.jsx("span",{className:`text-xs ${a?"text-gray-700":"text-gray-400"}`,children:e.getDate()})}),t.jsxs("div",{className:"space-y-1",children:[c.slice(0,3).map(l=>t.jsx("div",{className:"text-[10px] px-2 py-1 rounded bg-[var(--app-blue)]15 text-[var(--app-blue)]",children:l.title},String(l.id))),c.length>3&&t.jsxs("div",{className:"text-[10px] text-[var(--app-gray)]",children:["+",c.length-3," mais"]})]})]},s)})}),i==="week"&&t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"grid grid-cols-7 gap-1 mb-4",children:S.map((e,s)=>{const a=e.toDateString()===f.toDateString(),n=e.toDateString()===r.toDateString();return t.jsxs("button",{onClick:()=>m(e),className:`flex flex-col items-center py-3 rounded-xl transition-colors ${n?"bg-[var(--app-blue)] text-white":a?"bg-[var(--app-blue)]15 text-[var(--app-blue)]":"hover:bg-gray-100"}`,children:[t.jsx("span",{className:"text-xs mb-1",children:w[s]}),t.jsx("span",{className:"text-lg font-medium",children:e.getDate()})]},s)})}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("h3",{className:"font-medium text-gray-900 mb-4",children:["Eventos de ",r.toLocaleDateString("pt-BR",{weekday:"long",day:"2-digit",month:"long"})]}),t.jsx("div",{className:"space-y-3",children:h(r).map(e=>t.jsx(M,{className:"p-4 bg-white rounded-xl border-0 shadow-sm",children:t.jsxs("div",{className:"flex items-start space-x-4",children:[t.jsx("div",{className:"w-1 h-16 rounded-full flex-shrink-0",style:{backgroundColor:e.color||"var(--app-blue)"}}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:e.title}),t.jsxs("div",{className:"flex items-center space-x-4 text-sm text-[var(--app-gray)] mb-2",children:[t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx($,{size:14}),t.jsx("span",{children:j(e.start,e.end)})]}),"attendees"in e&&e.attendees&&t.jsxs("div",{className:"flex items-center space-x-1",children:[t.jsx(z,{size:14}),t.jsxs("span",{children:[e.attendees," pessoas"]})]})]}),"location"in e&&e.location&&t.jsxs("div",{className:"flex items-center space-x-1 text-sm text-[var(--app-gray)] mb-2",children:[t.jsx(A,{size:14}),t.jsx("span",{children:e.location})]})]})]})},e.id))})]})]}),i==="day"&&t.jsx("div",{className:"flex-1",children:t.jsx("div",{className:"grid grid-cols-1 gap-1",children:Array.from({length:24},(e,s)=>t.jsxs("div",{className:"flex items-center border-b border-gray-100 py-3",children:[t.jsxs("div",{className:"w-16 text-sm text-[var(--app-gray)] text-right pr-4",children:[s.toString().padStart(2,"0"),":00"]}),t.jsx("div",{className:"flex-1",children:h(r).filter(a=>new Date(a.start).getHours()===s).map(a=>t.jsxs("div",{className:"p-3 rounded-lg mb-2",style:{backgroundColor:`${a.color||"var(--app-blue)"}15`},children:[t.jsx("h4",{className:"font-medium text-gray-900 text-sm",children:a.title}),t.jsx("p",{className:"text-xs text-[var(--app-gray)]",children:j(a.start,a.end)})]},a.id))})]},s))})})]})};export{Y as default};
